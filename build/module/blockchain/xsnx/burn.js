import { ethers } from 'ethers';
import { GAS_LIMIT_PERCENTAGE_ETH } from '../../constants';
import { getPercentage } from '../../utils';
import { getXSnxContracts } from './helper';
const { formatEther, parseEther } = ethers.utils;
export const burnXSnx = async (amount, provider) => {
    const { xsnxContract } = await getXSnxContracts(provider);
    // Estimate `gasLimit`
    const gasLimit = getPercentage(await xsnxContract.estimateGas.burn(amount), GAS_LIMIT_PERCENTAGE_ETH);
    return xsnxContract.burn(amount, { gasLimit });
};
export const getExpectedQuantityOnBurnXSnx = async (amount, provider) => {
    const inputAmount = parseEther(amount);
    const { tradeAccountingContract, xsnxContract } = await getXSnxContracts(provider);
    const totalSupply = await xsnxContract.totalSupply();
    const redemptionValue = await tradeAccountingContract.calculateRedemptionValue(totalSupply, inputAmount);
    return formatEther(redemptionValue);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVybi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9ibG9ja2NoYWluL3hzbngvYnVybi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQWEsTUFBTSxFQUFFLE1BQU0sUUFBUSxDQUFBO0FBRTFDLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGlCQUFpQixDQUFBO0FBQzFELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxhQUFhLENBQUE7QUFFM0MsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sVUFBVSxDQUFBO0FBRTNDLE1BQU0sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQTtBQUVoRCxNQUFNLENBQUMsTUFBTSxRQUFRLEdBQUcsS0FBSyxFQUMzQixNQUFpQixFQUNqQixRQUFzQixFQUNRLEVBQUU7SUFDaEMsTUFBTSxFQUFFLFlBQVksRUFBRSxHQUFHLE1BQU0sZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUE7SUFFekQsc0JBQXNCO0lBQ3RCLE1BQU0sUUFBUSxHQUFHLGFBQWEsQ0FDNUIsTUFBTSxZQUFZLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFDM0Msd0JBQXdCLENBQ3pCLENBQUE7SUFFRCxPQUFPLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQTtBQUNoRCxDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsTUFBTSw2QkFBNkIsR0FBRyxLQUFLLEVBQ2hELE1BQWMsRUFDZCxRQUFzQixFQUN0QixFQUFFO0lBQ0YsTUFBTSxXQUFXLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBRXRDLE1BQU0sRUFBRSx1QkFBdUIsRUFBRSxZQUFZLEVBQUUsR0FBRyxNQUFNLGdCQUFnQixDQUN0RSxRQUFRLENBQ1QsQ0FBQTtJQUVELE1BQU0sV0FBVyxHQUFHLE1BQU0sWUFBWSxDQUFDLFdBQVcsRUFBRSxDQUFBO0lBQ3BELE1BQU0sZUFBZSxHQUFHLE1BQU0sdUJBQXVCLENBQUMsd0JBQXdCLENBQzVFLFdBQVcsRUFDWCxXQUFXLENBQ1osQ0FBQTtJQUVELE9BQU8sV0FBVyxDQUFDLGVBQWUsQ0FBQyxDQUFBO0FBQ3JDLENBQUMsQ0FBQSJ9