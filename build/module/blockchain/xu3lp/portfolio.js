import { DEFAULT_LP_PORTFOLIO_ITEM } from '../../constants'
import { getUserAvailableTokenBalance } from '../utils'
import { getXU3LPContracts } from './helper'
import { getXU3LPPrices } from './prices'
export const getPortfolioItemXU3LP = async (symbol, address, provider) => {
  try {
    const { kyberProxyContract, xu3lpContract } = await getXU3LPContracts(
      symbol,
      provider
    )
    const xu3lpBal = await getUserAvailableTokenBalance(xu3lpContract, address)
    const { priceUsd } = await getXU3LPPrices(xu3lpContract, kyberProxyContract)
    const xu3lpValue = (xu3lpBal * priceUsd).toFixed(2).toString()
    return {
      symbol,
      quantity: xu3lpBal.toString(),
      price: priceUsd.toString(),
      value: xu3lpValue.toString(),
    }
  } catch (e) {
    console.error('Error while fetching portfolio balance:', e)
    return {
      symbol,
      ...DEFAULT_LP_PORTFOLIO_ITEM,
    }
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9ydGZvbGlvLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2Jsb2NrY2hhaW4veHUzbHAvcG9ydGZvbGlvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLGlCQUFpQixDQUFBO0FBRTNELE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUV2RCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDNUMsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUV6QyxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBRyxLQUFLLEVBQ3hDLE1BQXVCLEVBQ3ZCLE9BQWUsRUFDZixRQUFzQixFQUNLLEVBQUU7SUFDN0IsSUFBSTtRQUNGLE1BQU0sRUFBRSxrQkFBa0IsRUFBRSxhQUFhLEVBQUUsR0FBRyxNQUFNLGlCQUFpQixDQUNuRSxNQUFNLEVBQ04sUUFBUSxDQUNULENBQUE7UUFFRCxNQUFNLFFBQVEsR0FBRyxNQUFNLDRCQUE0QixDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUUzRSxNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsTUFBTSxjQUFjLENBQUMsYUFBYSxFQUFFLGtCQUFrQixDQUFDLENBQUE7UUFDNUUsTUFBTSxVQUFVLEdBQUcsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFBO1FBRTlELE9BQU87WUFDTCxNQUFNO1lBQ04sUUFBUSxFQUFFLFFBQVEsQ0FBQyxRQUFRLEVBQUU7WUFDN0IsS0FBSyxFQUFFLFFBQVEsQ0FBQyxRQUFRLEVBQUU7WUFDMUIsS0FBSyxFQUFFLFVBQVUsQ0FBQyxRQUFRLEVBQUU7U0FDN0IsQ0FBQTtLQUNGO0lBQUMsT0FBTyxDQUFDLEVBQUU7UUFDVixPQUFPLENBQUMsS0FBSyxDQUFDLHlDQUF5QyxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQzNELE9BQU87WUFDTCxNQUFNO1lBQ04sR0FBRyx5QkFBeUI7U0FDN0IsQ0FBQTtLQUNGO0FBQ0gsQ0FBQyxDQUFBIn0=
